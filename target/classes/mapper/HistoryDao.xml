<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tech.bilian.dao.HistoryDao">
    <select id="queryHistory" parameterType="tech.bilian.pojo.History" resultType="tech.bilian.pojo.History">
        select history_id, user_id, song_id, song_name, time, state

        from history

        <where>
            <if test="history!=null and history.userId!=null">
                and user_id = #{history.userId}
            </if>

            <if test="history!=null and history.songId!=null">
                and song_id = #{history.songId}
            </if>

            <if test="history!=null and history.state!=null">
                and state = #{history.state}
            </if>
        </where>
    </select>


    <insert id="insertHistory" parameterType="tech.bilian.pojo.History">
        insert into history (user_id, song_id, song_name, time, state)

        values (#{history.userId}, #{history.songId}, #{history.songName}, #{history.time}, #{history.state})
    </insert>


</mapper>